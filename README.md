# 星铁自动过剧情脚本工具
适配：Windows版 <崩坏：星穹铁道>

> 采用 Python的**opencv**库进行图像识别来实现自动化点击操作，以及使用了**threading**库 多线程，对每个功能独立处理，相互不堵塞。但是CPU利用率比较高

功能列表：

1. **跳过剧情** | 快捷键：U | 自动对话，自动选择对话句子，如果有跳过按钮会直接点跳过按钮跳过。
2. **跳过获得物品界面** | 快捷键：I | 出现“获得物品”的画面时会自动点击空白处给它点掉。
3. **点击进入游戏** | 快捷键：O | 在登录后状态，游戏内屏幕下方出现“点击进入”时自动点击。
4. **点击再次派遣** | 快捷键：P | 出现“再次派遣”按钮时自动点击。
5. **确认退出游戏** | 快捷键：H | 游戏窗口出现确认退出弹窗时自动点击确认。
6. **点击确认按钮** | 快捷键：K | 游戏中任何界面出现确认按钮时自动点击它。
7. **点击再来一次** | 快捷键：L | 刷材料战斗成功后的界面出现的两个按钮，自动点击再来一次。

## 下载安装
在发行（Release）中选择`Star-Rail_Auto_Dialog_Excutable_版本号.zip`或者`Star-Rail_Auto_Dialog_版本号.zip`下载，解压之后使用。

- 带 Excutable 字样的是 已打包成可执行程序的，不安装Python环境也能运行。
- 没有 Excutable 字样的是 Python的源代码程序，需要有Python环境才能运行。（并需要安装下方提到的依赖的包）

## 注意事项
- **跳过剧情功能 建议仅在过剧情对话时开启**，点击跳过按钮、跳过剧情确认弹窗靠的是识别确认按钮的按钮内区域，如果是其它界面可能也会自动点。
- 使用**python.exe**运行代码！而不是pythonw.exe。（Python用来运行代码的可执行程序有两个，一个是控制台形式的，一个是(GUI)图形界面形式的，python后面带`w`的就是图形界面形式执行的。不要选GUI那一个，不然可能打开时，控制台会崩来崩去闪来闪去的没办法使用）

运行脚本前确保安装了`requirements.txt`中提到的库，不然不能正常运行脚本。

需要安装的话可以使用以下命令安装`requirements.txt`写到的库：（在`requirements.txt`所在位置打开终端/cmd执行）

```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## 其它说明

在`SRAD.py`代码里643到651行中的_register_functions函数里可以设置哪些功能在程序启动时是否为默认启动状态。


>  "代号": {"hotkey": "快捷键", "type": "类型（TOGGLE或ONCE）", "func": "(主)函数名称", "running": "是否默认启动"}
